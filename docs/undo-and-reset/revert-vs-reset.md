# ЁЯФД `git revert` ржмржирж╛ржо `git reset`

Git-ржП ржХржЦржиржУ ржХржЦржиржУ ржЖржкржирж┐ ржПржоржи ржПржХржЯрж┐ ржЕржмрж╕рзНржерж╛ржирзЗ ржкрзМржБржЫрж╛ржи, ржпрзЗржЦрж╛ржирзЗ ржкрзВрж░рзНржмрзЗрж░ ржХрзЛржи ржнрзБрж▓ ржХржорж┐ржЯ ржмрж╛рждрж┐рж▓ ржмрж╛ рж╕ржВрж╢рзЛржзржи ржХрж░рждрзЗ рж╣рзЯред ржПржЬржирзНржп Git ржЖржорж╛ржжрзЗрж░ ржжрзБржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржЯрзБрж▓ ржжрзЗрзЯ:

* `git reset`
* `git revert`

ржжрзБтАЩржЯрж┐ржЗ ржХржорж┐ржЯ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ **ржнрж┐ржирзНржиржнрж╛ржмрзЗ**ред


## тЬЕ ржжрзНрж░рзБржд ржкрж╛рж░рзНржержХрзНржп ржЯрзЗржмрж┐рж▓:

| ржмрж┐рж╖рзЯ                     | `git reset`                  | `git revert`              |
| ------------------------ | ---------------------------- | ------------------------- |
| ржХржорж┐ржЯ **ржорзБржЫрзЗ ржлрзЗрж▓рзЗ**       | тЬЕ рж╣рзНржпрж╛ржБ                      | тЭМ ржирж╛                      |
| ржирждрзБржи ржХржорж┐ржЯ рждрзИрж░рж┐ ржХрж░рзЗ       | тЭМ ржирж╛ (reset рж╢рзБржзрзБ HEAD ржмржжрж▓рж╛рзЯ) | тЬЕ рж╣рзНржпрж╛ржБ                   |
| Git History ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ | тЬЕ рж╣рзНржпрж╛ржБ                      | тЭМ ржирж╛                      |
| ржЯрж┐ржорзЗ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржирж┐рж░рж╛ржкржж   | тЭМ ржирж╛                         | тЬЕ рж╣рзНржпрж╛ржБ                   |
| ржЖржЧрзЗрж░ commit ржлрж┐рж░рж┐рзЯрзЗ ржЖржирж╛   | тЬЕ                            | тЬЕ (ржнрж┐ржирзНржиржнрж╛ржмрзЗ)             |
| Remote branch ржП ржмрзНржпржмрж╣рж╛рж░  | тЭМ рж╕рждрж░рзНржХ ржерж╛ржХрждрзЗ рж╣рзЯ             | тЬЕ ржирж┐рж░рж╛ржкржжрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ |


## ЁЯЫая╕П `git reset` ржХрзА?

`git reset` ржПржХржЯрж┐ **destructive operation**, ржпрж╛ ржЖржкржирж╛рж░ ржХржорж┐ржЯ history ржерзЗржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕржВрж╢ **ржкрзБрж░рзЛржкрзБрж░рж┐ ржорзБржЫрзЗ** ржжрзЗрзЯ (ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ `--hard` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ)ред

### ЁЯОп ржЙржжрж╛рж╣рж░ржг рзз: рж╢рзЗрж╖ ржХржорж┐ржЯ ржорзБржЫрзЗ ржлрзЗрж▓рзБржи (staged ржлрж╛ржЗрж▓рж╕рж╣)

```bash
git reset --soft HEAD~1
```

### ЁЯОп ржЙржжрж╛рж╣рж░ржг рзи: рж╢рзЗрж╖ ржХржорж┐ржЯ ржПржмржВ рж╕рзНржЯрзЗржЬрж┐ржВ ржорзБржЫрзЗ ржлрзЗрж▓рзБржи

```bash
git reset --mixed HEAD~1
```

### ЁЯОп ржЙржжрж╛рж╣рж░ржг рзй: рж╕ржм ржХрж┐ржЫрзБ рж╣рж╛рж░рж┐рзЯрзЗ ржлрзЗрж▓рзБржи

```bash
git reset --hard HEAD~1
```


## ЁЯЫая╕П `git revert` ржХрзА?

`git revert` ржПржХржЯрж┐ **safe** ржЕржкрж╛рж░рзЗрж╢ржиред ржПржЯрж┐ ржЖржЧрзЗрж░ ржнрзБрж▓ ржХржорж┐ржЯржХрзЗ "ржмрж╛рждрж┐рж▓" ржХрж░рзЗ **ржирждрзБржи ржПржХржЯрж┐ ржЙрж▓рзНржЯрзЛ ржХржорж┐ржЯ** рждрзИрж░рж┐ ржХрж░рзЗред

### ЁЯОп ржЙржжрж╛рж╣рж░ржг рзз: рж╢рзЗрж╖ ржХржорж┐ржЯ revert ржХрж░рзБржи

```bash
git revert HEAD
```

### ЁЯОп ржЙржжрж╛рж╣рж░ржг рзи: ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХржорж┐ржЯ revert ржХрж░рзБржи

```bash
git revert d4e7a3f
```

ЁЯСЙ ржПржЯрж┐ рж╕рзЗржЗ ржХржорж┐ржЯрзЗрж░ ржмрж┐ржкрж░рзАржд ржХрж╛ржЬ ржХрж░рзЗ ржирждрзБржи ржПржХржЯрж┐ ржХржорж┐ржЯ рждрзИрж░рж┐ ржХрж░ржмрзЗред


## ЁЯзк рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржмрзНржпржмрж╣рж╛рж░рж┐ржХ ржЙржжрж╛рж╣рж░ржг

### ЁЯОм ржзрж░рзБржи: ржЖржкржирж╛рж░ Repo-рждрзЗ рзйржЯрж┐ ржХржорж┐ржЯ ржЖржЫрзЗ

```
A --> B --> C  (HEAD)
```

#### тЬЕ ржЖржкржирж┐ ржпржжрж┐ `git reset --hard B` ржХрж░рзЗржи:

```
A --> B   (C ржХржорж┐ржЯ ржкрзБрж░рзЛржкрзБрж░рж┐ ржЧрж╛рзЯрзЗржм)
```

#### тЬЕ ржЖржкржирж┐ ржпржжрж┐ `git revert C` ржХрж░рзЗржи:

```
A --> B --> C --> C'   (C' = C ржПрж░ ржмрж┐ржкрж░рзАржд)
```

## тЪая╕П ржЯрж┐ржорзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ рж╕ржорзЯ ржХрзМрж╢рж▓

| ржХрж╛ржЬрзЗрж░ ржзрж░ржи                       | reset ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи? | revert ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи? |
| ------------------------------- | -------------------- | --------------------- |
| ржирж┐ржЬрзЗрж░ local branch              | тЬЕ рж╣рзНржпрж╛ржБ              | тЭМ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗ         |
| ржЯрж┐ржорзЗрж░ shared branch (ржпрзЗржоржи main) | тЭМ ржирж╛                 | тЬЕ ржЕржмрж╢рзНржпржЗ              |
| mistake undo                    | тЬЕ reset ржХрж░рж╛ ржпрж╛рзЯ      | тЬЕ revert ржХрж░рж╛ржУ ржпрж╛рзЯ     |
| Git history ржкрж░рж┐рж╕рзНржХрж╛рж░ ржХрж░рждрзЗ       | тЬЕ reset ржнрж╛рж▓          | тЭМ ржирж╛                  |

## ЁЯза `reset` vs `revert` ржХрзЗ ржмрзЛржЭрж╛рж░ рж╕рж╣ржЬ ржЙржкрж╛рзЯ:

| ржкрзНрж░рж╢рзНржи                                                        | ржЙрждрзНрждрж░        |
| ------------------------------------------------------------- | ------------ |
| **ржЖржорж┐ ржЖржЧрзЗрж░ commit ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржЪрж╛ржЗ**                            | `git reset`  |
| **ржЖржорж┐ ржЖржЧрзЗрж░ commit ржПрж░ effect ржмрж╛рждрж┐рж▓ ржХрж░рждрзЗ ржЪрж╛ржЗ, history рж░рзЗржЦрзЗ**    | `git revert` |
| **ржЖржорж┐ team ржПрж░ рж╕ржЩрзНржЧрзЗ ржХрж╛ржЬ ржХрж░ржЫрж┐, remote branch ржП push ржХрж░рждрзЗ рж╣ржмрзЗ** | `git revert` |
| **ржЖржорж┐ history ржПржХржжржо ржкрж░рж┐рж╕рзНржХрж╛рж░ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗ, рж╢рзБржзрзБ ржЖржорж╛рж░ local ржП**    | `git reset`  |

## тЬЕ ржХрж┐ржЫрзБ ржЖрж░ржУ ржЙржжрж╛рж╣рж░ржг

### рзз. рж╢рзЗрж╖ рзиржЯрж┐ ржХржорж┐ржЯ revert ржХрж░рзБржи

```bash
git revert HEAD~1
git revert HEAD~1
```

### рзи. ржПржХрж╕рж╛ржерзЗ ржХрзЯрзЗржХржЯрж┐ ржХржорж┐ржЯ revert ржХрж░рзБржи (range)

```bash
git revert HEAD~3..HEAD
```

### рзй. ржПржХржЯрж┐ reset ржХрж░рзЗ ржЖржмрж╛рж░ push ржХрж░рждрзЗ ржЪрж╛ржи

```bash
git reset --hard HEAD~1
git push origin main --force
```

тЪая╕П **рж╕рждрж░рзНржХрждрж╛:** ржЯрж┐ржорзЗ ржирж╛ ржерж╛ржХрж▓рзЗ ржмрж╛ ржмрзБржЭрзЗ ржХрж░рж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

## тЬЕ Bonus Tip: Commit History ржжрзЗржЦрзБржи

```bash
git log --oneline
```

## тЬЕ ржЙржкрж╕ржВрж╣рж╛рж░

| ржкрж░рж┐рж╕рзНржерж┐рждрж┐                           | ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи |
| ----------------------------------- | ------------ |
| ржирж┐ржЬрзЗ ржнрзБрж▓ ржХрж░рзЗржЫрж┐, remote ржП push ржХрж░рж┐ржирж┐ | `git reset`  |
| ржнрзБрж▓ ржХрж░рзЗржЫрж┐ ржПржмржВ remote ржП push ржХрж░рзЗржЫрж┐   | `git revert` |
| ржЗрждрж┐рж╣рж╛рж╕рзЗ ржкрж░рж┐ржмрж░рзНрждржи ржЖржирждрзЗ ржЪрж╛ржЗ           | `git reset`  |
| ржЗрждрж┐рж╣рж╛рж╕ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗ ржХрж┐ржирзНрждрзБ ржХрж╛ржЬ ржмрж╛рждрж┐рж▓   | `git revert` |

## тЬНя╕П ржЙржкрж╕ржВрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг рж╕рж╣

ржЖржкржирж┐ ржпржжрж┐ ржПржоржи ржЕржмрж╕рзНржерж╛рзЯ ржерж╛ржХрзЗржи:

* ржнрзБрж▓ ржХрж░рзЗ `.env` ржлрж╛ржЗрж▓ push ржХрж░рзЗ ржлрзЗрж▓рзЗржЫрзЗржи
* ржПржЦржи ржЖржкржирж┐ history clear ржХрж░рждрзЗ ржЪрж╛ржи

рждржмрзЗ:

```bash
git reset --hard HEAD~1
git push --force
```

ржХрж┐ржирзНрждрзБ ржпржжрж┐ history рж░рж╛ржЦрждрзЗ ржЪрж╛ржи ржПржмржВ рж╢рзБржзрзБ effect ржмрж╛рждрж┐рж▓ ржХрж░рждрзЗ ржЪрж╛ржи:

```bash
git revert HEAD
```
