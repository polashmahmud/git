# ЁЯФБ Git Reset

Git reset ржХржорж╛ржирзНржб ржжрж┐рзЯрзЗ ржЖржкржирж┐ `HEAD`, `staging area (index)`, ржПржмржВ `working directory`-ржХрзЗ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

`reset` ржПрж░ ржкрзНрж░ржзрж╛ржи рзйржЯрж┐ ржорзЛржб ржЖржЫрзЗ:

1. `--soft`
2. `--mixed` (ржбрж┐ржлрж▓рзНржЯ)
3. `--hard`

## ЁЯФН рж╕ржВржХрзНрж╖рзЗржкрзЗ ржкрж╛рж░рзНржержХрзНржп:

| рж░рж┐рж╕рзЗржЯ ржЯрж╛ржЗржк | HEAD ржкрж░рж┐ржмрж░рзНрждржи | Index (staging) ржкрж░рж┐ржмрж░рзНрждржи | Working Directory ржкрж░рж┐ржмрж░рзНрждржи | ржлрж╛ржЗрж▓ ржерж╛ржХрзЗ ржХрж┐? |
| ---------- | ------------- | ------------------------ | -------------------------- | ------------- |
| `--soft`   | тЬЕ рж╣рзЯ          | тЭМ рж╣рзЯ ржирж╛                  | тЭМ рж╣рзЯ ржирж╛                    | тЬЕ ржлрж╛ржЗрж▓ ржерж╛ржХрзЗ   |
| `--mixed`  | тЬЕ рж╣рзЯ          | тЬЕ рж╣рзЯ                     | тЭМ рж╣рзЯ ржирж╛                    | тЬЕ ржлрж╛ржЗрж▓ ржерж╛ржХрзЗ   |
| `--hard`   | тЬЕ рж╣рзЯ          | тЬЕ рж╣рзЯ                     | тЬЕ рж╣рзЯ                       | тЭМ ржлрж╛ржЗрж▓ рж╣рж╛рж░рж╛рзЯ  |

## рззя╕П. `git reset --soft`

### ЁЯУМ ржХрж╛ржЬ:

* рж╢рзБржзрзБ **HEAD** ржХрзЗ ржкрзЗржЫржирзЗ ржирж┐рзЯрзЗ ржпрж╛рзЯ
* ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ **staged** ржЕржмрж╕рзНржерж╛рзЯржЗ ржерж╛ржХрзЗ

### ЁЯОп ржЙржжрж╛рж╣рж░ржг:

```bash
git reset --soft HEAD~1
```

ржЖржкржирж┐ рж╢рзЗрж╖ ржпрзЗ ржХржорж┐ржЯржЯрж┐ ржХрж░рзЗржЫрзЗржи, рж╕рзЗржЯрж╛ ржорзБржЫрзЗ ржпрж╛ржмрзЗ ржХрж┐ржирзНрждрзБ ржЖржкржирж╛рж░ рж╕ржм ржлрж╛ржЗрж▓ ржПржЦржирзЛ staging area-рждрзЗ ржерж╛ржХржмрзЗред

```bash
git status
# Output: Changes to be committed: (staged files)
```

### ЁЯЫая╕П ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

* ржЖржкржирж┐ рж╢рзЗрж╖ ржХржорж┐ржЯ ржорзЗрж╕рзЗржЬрзЗ ржнрзБрж▓ ржХрж░рзЗржЫрзЗржи
* ржЕржержмрж╛ ржПржХрж╛ржзрж┐ржХ ржХржорж┐ржЯ ржПржХржЯрж┐рждрзЗ ржХрж░рждрзЗ ржЪрж╛ржи

## рзия╕П. `git reset --mixed` (default)

### ЁЯУМ ржХрж╛ржЬ:

* **HEAD** ржПржмржВ **staging area** (index) ржкрзЗржЫржирзЗ ржирж┐рзЯрзЗ ржпрж╛рзЯ
* ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ working directory-рждрзЗ рж░рж╛ржЦрзЗ (staged ржирж╛)

### ЁЯОп ржЙржжрж╛рж╣рж░ржг:

```bash
git reset --mixed HEAD~1
```

ржПржмрж╛рж░ `git status` ржжрж┐рж▓рзЗ ржжрзЗржЦржмрзЗржи ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ modified рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ржЪрзНржЫрзЗ, ржХрж┐ржирзНрждрзБ unstagedред

### ЁЯЫая╕П ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

* ржлрж╛ржЗрж▓рзЗрж░ ржХрж╛ржЬ ржарж┐ржХ ржЖржЫрзЗ, ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржирждрзБржи ржХрж░рзЗ stage ржУ commit ржХрж░рждрзЗ ржЪрж╛ржи

## рзй. `git reset --hard`

### ЁЯУМ ржХрж╛ржЬ:

* рж╕ржм ржХрж┐ржЫрзБ (HEAD, staging, working directory) ржкрзЗржЫржирзЗ ржирж┐рзЯрзЗ ржпрж╛рзЯ
* ржЖржкржирж╛рж░ рж╢рзЗрж╖ ржХрж░рж╛ ржХрж╛ржЬ ржкрзБрж░рзЛржкрзБрж░рж┐ **рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛рзЯ**

### ЁЯОп ржЙржжрж╛рж╣рж░ржг:

```bash
git reset --hard HEAD~1
```

> тЪая╕П рж╕рж╛ржмржзрж╛ржи! ржПржЯрж┐ ржХрж░рж╛рж░ ржкрж░ ржЖржЧрзЗрж░ ржХрж╛ржЬ ржлрзЗрж░ржд ржкрж╛ржмрзЗржи ржирж╛ (ржпржжрж┐ backup ржирж╛ ржерж╛ржХрзЗ)

### ЁЯЫая╕П ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

* ржЖржкржирж┐ ржкрзБрж░рзЛржкрзБрж░рж┐ рж╕ржм ржмрж╛рждрж┐рж▓ ржХрж░рждрзЗ ржЪрж╛ржи
* ржпрзЗржоржи: ржнрзБрж▓рзЗ `.env` ржмрж╛ credentials commit ржХрж░рзЗ ржлрзЗрж▓рзЗржЫрзЗржи

## ЁЯУЪ ржЖрж░ржУ ржЙржжрж╛рж╣рж░ржг:

### тЬЕ ржПржХрж╛ржзрж┐ржХ ржХржорж┐ржЯ undo ржХрж░рждрзЗ ржЪрж╛ржи?

```bash
git reset --soft HEAD~3
```

ЁЯСЙ рж╢рзЗрж╖ рзйржЯрж┐ ржХржорж┐ржЯ ржмрж╛рждрж┐рж▓, ржХрж╛ржЬ ржерж╛ржХржмрзЗ staged рж╣рж┐рж╕рзЗржмрзЗ

```bash
git reset --mixed HEAD~2
```

ЁЯСЙ рж╢рзЗрж╖ рзиржЯрж┐ ржХржорж┐ржЯ ржмрж╛рждрж┐рж▓, ржХрж╛ржЬ ржерж╛ржХржмрзЗ unstaged рж╣рж┐рж╕рзЗржмрзЗ

```bash
git reset --hard HEAD~5
```

ЁЯСЙ рж╢рзЗрж╖ рзлржЯрж┐ ржХржорж┐ржЯ ржУ ржХрж╛ржЬ ржорзБржЫрзЗ ржпрж╛ржмрзЗ, рж╕рж╛ржмржзрж╛ржи!

## тЬЕ Re-commit ржХрж░рж╛рж░ ржЙржжрж╛рж╣рж░ржг (soft reset рж╕рж╣)

```bash
git reset --soft HEAD~1
git commit -m "ржирждрзБржи ржУ ржарж┐ржХ ржХрж░рж╛ ржХржорж┐ржЯ ржорзЗрж╕рзЗржЬ"
```

## тЬЕ Reset ржХрж░рж╛рж░ ржкрж░ ржЖржмрж╛рж░ Push ржХрж░рждрзЗ ржЪрж╛ржи?

```bash
git push origin main --force
```

> тЪая╕П ржЯрж┐ржорзЗ ржХрж╛ржЬ ржХрж░рж▓рзЗ `--force` ржмрзНржпржмрж╣рж╛рж░рзЗ рж╕рждрж░рзНржХ ржерж╛ржХрзБржиред

## тЬЕ Git Reset vs Git Revert

| ржХрж╛ржЬ                      | Reset | Revert |
| ------------------------ | ----- | ------ |
| ржХржорж┐ржЯ ржорзБржЫрзЗ ржлрзЗрж▓рзЗ           | тЬЕ     | тЭМ      |
| ржЖржЧрзЗрж░ ржорждрзЛ commit рж░рзЗржЦрзЗ ржпрж╛рзЯ | тЭМ     | тЬЕ      |
| History ржкрж░рж┐рж╖рзНржХрж╛рж░         | тЬЕ     | тЭМ      |
| ржЯрж┐ржорзЗ ржирж┐рж░рж╛ржкржж              | тЭМ     | тЬЕ      |


## тЬЕ ржХрж┐ржЫрзБ alias ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп

```bash
# soft reset (рж╢рзБржзрзБ ржХржорж┐ржЯ ржорзБржЫрзЗ)
alias grs='git reset --soft HEAD~1'

# mixed reset (ржХржорж┐ржЯ + stage ржмрж╛рждрж┐рж▓)
alias grm='git reset --mixed HEAD~1'

# hard reset (рж╕ржм ржорзБржЫрзЗ)
alias grh='git reset --hard HEAD~1'
```

## ЁЯФЪ ржЙржкрж╕ржВрж╣рж╛рж░

Git reset-ржПрж░ ржПржЗ рзйржЯрж┐ ржзрж░ржи ржЖржкржирж╛рж░ version history ржкрж░рж┐ржЪрж╛рж▓ржирж╛рзЯ ржЕржирзЗржХ рж╕рж╣рж╛рзЯржХред ржирж┐ржЪрзЗрж░ ржмрж┐рж╖рзЯржЧрзБрж▓рзЛ ржоржирзЗ рж░рж╛ржЦрзБржи:

* `--soft`: ржХржорж┐ржЯ ржмрж╛рждрж┐рж▓, ржХрж╛ржЬ staged ржерж╛ржХржмрзЗ
* `--mixed`: ржХржорж┐ржЯ + stage ржмрж╛рждрж┐рж▓, ржХрж╛ржЬ ржерж╛ржХржмрзЗ unstaged
* `--hard`: рж╕ржм ржмрж╛рждрж┐рж▓, ржХрж╛ржЬ рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛ржмрзЗ
